\documentclass[a4paper,11pt]{article}
\usepackage[UKenglish]{babel}
\usepackage{graphicx}
\usepackage{courier}
\usepackage{color}
\usepackage{array}
\usepackage{pstricks}
\usepackage{parskip}
\usepackage[bottom]{footmisc}
\usepackage{fancyhdr}
% the hyperref package must always be the last package to be included
\usepackage[pdftex,
            pdfusetitle,
            pdfsubject={User's Manual for dastaZ80 homebrew computer},
            pdfkeywords={Z80, homebrew computer, Operating System, OS}
        ]{hyperref}

\hypersetup{
    colorlinks = true,
    linkcolor = blue,
    anchorcolor = blue,
    citecolor = blue,
    filecolor = blue,
    urlcolor = blue
}

\setlength\parindent{0pt}

\begin{document}
    \pagestyle{empty}
    % ==========================================================================
    % Cover page
    % ==========================================================================
    \begin{pspicture}(8.5,11)
        \rput[b](3.5,8){
            \parbox{5in}{
                \begin{flushright}
                    \Huge\bfseries\sffamily dastaZ80 Mark III\\ User's Manual
                \end{flushright}
            }
        }
        \uput[0](0,0){\color{blue}\rule{5in}{0.5ex}}
    \end{pspicture}
    \title{dastaZ80 User's Manual}
    \author{David Asta}
    \date{7 September 2022}

    \pagebreak
    % ==========================================================================
    % Header & Footer
    % ==========================================================================
    \pagestyle{fancy}
    \fancyhf{}
    \fancyhead[R]{dastaZ80 Mark III User's Manual}
    
    \begingroup
        \let\clearpage\relax
        \include{disclaimer_licenses}
        
        \textcopyright 2023 David Asta
    \endgroup

    \pagebreak
    % ==========================================================================
    \section*{Document Conventions}
    % ==========================================================================
    The following conventions are used in this manual:

    \begin{center}
        \begin{tabular}{c m{9cm}}
            \hline
            MUST & MUST denotes that the definition is and absolute
            requirement.\\
            \hline
            SHOULD & SHOULD denotes that it is recommended, but that there may
            exist valid reasons to ignore it.\\
            \hline
            \textbf{DEVICE} & Device names are displayed in bold all upper case 
            letters, and refer to hardware devices.\\
            \hline
            \textbf{command} & Operating System command keywords are displayed 
            in bold all lower case letters.\\
            \hline
            \textit{$<$text$>$} & Angle brackets enclose variable information 
            that you MUST supply. In place of \textit{$<$text$>$}, substitute 
            the value desired. Do not enter the angle brackets when entering the
            value.\\
            \hline
            \textit{$[$text$]$} & Square brackets enclose variable information
            that you COULD supply. They are optional. In place of $[$text$]$,
            substitute the value desired. Do not enter the square brackets when
            entering the value.\\
            \hline
            \texttt{Courier} & Text appearing in the \texttt{Courier} font 
            represents information that you type in via the keyboard.\\
            \hline
            0x14B0 & Numbers prefixed by 0x indicate an Hexadecimal value.
            Unless specified, memory addresses are always expressed in
            Hexadecimal.\\
            \hline
            \textit{Return} & Refers to the key Return in the keyboard.\\
            \hline
        \end{tabular}
    \end{center}

    The SD card is referred as \textbf{DISK}.

    The Floppy Disk Drive is referred as \textbf{DISK} or as \textbf{FDD}.

    The 80 column text VGA output is referred as \textbf{CONSOLE} or as
    \textbf{High Resolution Display}.

    The 40 column graphics Composite Video output is referred as \textbf{Low
    Resolution Display}.
    
    The Operating System may be referred as DZOS, dzOS or simply OS.

    \textbf{MEMORY} refers to both \textbf{ROM} and \textbf{RAM}.

    Memory used by the \textbf{Low Resolution Display} is referred as
    \textbf{VRAM} (Video RAM).

    \pagebreak
    % ==========================================================================
    \section*{Related Documentation}
    % ==========================================================================
    \begin{itemize}
        \item dastaZ80 User's Manual\cite{dastaz80userman}
        \item dastaZ80 Technical Reference Manual\cite{dastaz80techman}
        \item dzOS Github Repository\cite{dastaZ80github}
        \item Software for dzOS Github Repository\cite{dastaZ80githubsoft}
        \item Nascom 2 Microcomputer BASIC Programming Manuals\cite{nascombasic}
        \item Z80 Family CPU User Manual\cite{z80manual}
    \end{itemize}

    \pagebreak
    % ==========================================================================
    \tableofcontents
    % ==========================================================================

    \pagebreak
    % ==========================================================================
    % Header & Footer
    % ==========================================================================
    \pagestyle{fancy}
    \fancyhf{}
    \fancyhead[R]{dastaZ80 Mark III User's Manual}
    \fancyfoot[R]{\thepage}
    \setcounter{page}{1}
    % ==========================================================================
    \section{Introduction}
    % ==========================================================================
    The dastaZ80 is a homebrew computer designed and built following the style
    of the 8-bit computers of the 80s that I used on those days: Amstrad CPC,
    Commodore 64 and MSX. The name comes from “d”avid “asta” (my name) and 
    “Z80” (the CPU used).

    The idea behind the making of this computer came from an initial wish of
    writing an operating system (OS) for an 8-bit machine. Not comfortable with
    writing an OS for an already existing computer like an Amstrad CPC, C64,
    MSX, etc., due to the complexity of its hardware (or rather my lack of
    knowledge), I decided to built my own 8-bit computer from scratch, so that
    I could fully understand the hardware and also influence the design.

    The OS written by me for this computer is called \textit{DZOS}, from 
    dastaZ80 OS. Sometimes I spell it as \textit{dzOS}. Haven’t made my mind 
    yet.

    This manual describes the usage of DZOS running on the dastaZ80 computer.
    
    \pagebreak
    % ==========================================================================
    \section{dastaZ80 Overview}
    % ==========================================================================
    \begin{itemize}
        \item ZiLOG Z80 microprocessor (CPU) running at 7.3728 MHz
        \item 64 KB \textbf{MEMORY}
        \begin{itemize}
            \item 16 KB reserved for DZOS
            \item 48 KB available for the user
            \item 56 Bytes NVRAM
        \end{itemize}
        \item Storage devices
        \begin{itemize}
            \item Micro SD Card, formatted with FAT32 and containing Disk Image
            Files formatted with DZFS\footnote{DZFS (dastaZ80 File System) is a
            file system of my own design, for mass storage devices, aimed at
            simplicity.}
            \item 3.5" DD/HD Floppy Disk Drive
        \end{itemize}
        \item Dual Video output
        \begin{itemize}
            \item VGA 80 columns by 25 lines and 16 colours
            \item Composite NTSC 15 colours
        \end{itemize}
        \item Stereo Sound
        \begin{itemize}
            \item Programmable Sound Generator (PSG) with 3 channels (1 tone
            per channel), 7 octaves, 1 noise channel, envelope generator
            \footnote{Same chip as used in numerous Arcade machines and in
            Amstrad CPC, Atari ST, MSX, ZX Spectrum and other home computers.}
        \end{itemize}
        \item Real-Time Clock
        \begin{itemize}
            \item Date and Time backed up with button cell battery, provides
            valid until the year 2100 leap year compensation.
        \end{itemize}
        \item Keyboard
        \begin{itemize}
            \item Acorn Archimedes A3010 keyboard. 102 keys with 12 function
            keys, cursor keys and numeric pad
        \end{itemize}
        \item Case
        \begin{itemize}
            \item Repurposed Acorn Archimedes A3010 case with keyboard
        \end{itemize}
        \item Expansion ports
        \begin{itemize}
            \item 2x20 pin male header. Exposes all CPU signals
            \item 2x15 pin connector for ROM Cartridges.
        \end{itemize}
    \end{itemize}

    \pagebreak
    \include{sections/settingup}
    \pagebreak
    \include{sections/operation}
    \pagebreak
    \include{sections/maintenance}
    \pagebreak
    \include{sections/os}
    \pagebreak
    \include{sections/os_commands}
    \pagebreak
    \include{sections/other_software}
    \include{sections/appendixes}
    \pagebreak

    % ==========================================================================
    % Bibliography
    % ==========================================================================
    \pagebreak
    \bibliographystyle{unsrt}
    \bibliography{../dastaZ80}
\end{document}
